#!/bin/bash
bash -c $'water_digits=water\nstir_digits=stir.\nbestchol_digits=bestchol\ndigit_value() {\n chr=$1\ndigits=$2\ni=0\nfound=-1\nwhile [ $i -lt ${#digits} ]\ndo\n  if [ "${digits:$i:1}" = "$chr" ]\n  then\n    found=$i\n    break\n  fi\n  i=$((i + 1))\ndone\necho $found\n}\nto_decimal() {\n num=$1\ndigits=$2\nbase=${#digits}\nlen=${#num}\nresult=0\npower=1\ni=$((len - 1))\nwhile [ $i -ge 0 ]\ndo\n  digit_char=${num:$i:1}\n  val=$(digit_value "$digit_char" "$digits")\n  if [ $val -eq -1 ]\n  then\n    echo "Error: invalid digit $digit_char in input $num" >&2\n    exit 1\n  fi\n  result=$((result + val * power))\n  power=$((power * base))\n  i=$((i - 1))\ndone\necho $result\n}\nfrom_decimal() {\n dec=$1\ndigits=$2\nbase=${#digits}\nif [ $dec -eq 0 ]\nthen\n  echo "${digits:0:1}"\n  return\nfi\nres=""\nwhile [ $dec -gt 0 ]\ndo\n  rem=$((dec % base))\n  dec=$((dec / base))\n  res="${digits:$rem:1}$res"\ndone\necho "$res"\n}\n#STIR="${STIR//./}"\nwater_num=$(to_decimal "$WATER" "$water_digits")\nstir_num=$(to_decimal "$STIR" "$stir_digits")\nsum=$((water_num + stir_num))\necho "$(from_decimal "$sum" "$bestchol_digits")"'
